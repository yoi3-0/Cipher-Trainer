{"ast":null,"code":"import VKConnect from \"@vkontakte/vk-connect\";\nimport { store } from \"../../index\";\nimport { setColorScheme, setAccessToken } from \"../store/vk/actions\";\nvar APP_ID = 6984089;\nvar API_VERSION = '5.92';\nexport var initApp = function initApp() {\n  return function (dispatch) {\n    var VKConnectCallback = function VKConnectCallback(e) {\n      if (e.detail.type === 'VKWebAppUpdateConfig') {\n        VKConnect.unsubscribe(VKConnectCallback);\n        dispatch(setColorScheme(e.detail.data.scheme));\n      }\n    };\n\n    VKConnect.subscribe(VKConnectCallback);\n    return VKConnect.send('VKWebAppInit', {}).then(function (data) {\n      return data;\n    }).catch(function (error) {\n      return error;\n    });\n  };\n};\nexport var getAuthToken = function getAuthToken(scope) {\n  return function (dispatch) {\n    VKConnect.send(\"VKWebAppGetAuthToken\", {\n      \"app_id\": APP_ID,\n      \"scope\": scope.join(',')\n    }).then(function (data) {\n      dispatch(setAccessToken(data.access_token));\n    }).catch(function () {\n      dispatch(setAccessToken(null));\n    });\n  };\n};\nexport var closeApp = function closeApp() {\n  return VKConnect.send(\"VKWebAppClose\", {\n    \"status\": \"success\"\n  }).then(function (data) {\n    return data;\n  }).catch(function (error) {\n    return error;\n  });\n};\nexport var swipeBackOn = function swipeBackOn() {\n  return VKConnect.send(\"VKWebAppEnableSwipeBack\", {}).then(function (data) {\n    return data;\n  }).catch(function (error) {\n    return error;\n  });\n};\nexport var swipeBackOff = function swipeBackOff() {\n  return VKConnect.send(\"VKWebAppDisableSwipeBack\", {}).then(function (data) {\n    return data;\n  }).catch(function (error) {\n    return error;\n  });\n};\nexport var groupsGet = function groupsGet() {\n  return APICall('groups.get', {\n    \"extended\": \"1\",\n    \"fields\": \"description\",\n    \"count\": \"100\"\n  });\n};\nexport var APICall = function APICall(method, params) {\n  params['access_token'] = store.getState().vkui.accessToken;\n  params['v'] = params['v'] === undefined ? API_VERSION : params['v'];\n  return VKConnect.send(\"VKWebAppCallAPIMethod\", {\n    \"method\": method,\n    \"params\": params\n  }).then(function (data) {\n    return data.response;\n  }).catch(function (error) {\n    return error;\n  });\n};","map":{"version":3,"sources":["/Users/daniilkurpachenko/Desktop/onewayfunc/src/js/services/VK.js"],"names":["VKConnect","store","setColorScheme","setAccessToken","APP_ID","API_VERSION","initApp","dispatch","VKConnectCallback","e","detail","type","unsubscribe","data","scheme","subscribe","send","then","catch","error","getAuthToken","scope","join","access_token","closeApp","swipeBackOn","swipeBackOff","groupsGet","APICall","method","params","getState","vkui","accessToken","undefined","response"],"mappings":"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","sourcesContent":["import VKConnect from \"@vkontakte/vk-connect\";\n\nimport {store} from \"../../index\";\n\nimport {setColorScheme, setAccessToken} from \"../store/vk/actions\";\n\nconst APP_ID = 6984089;\nconst API_VERSION = '5.92';\n\nexport const initApp = () => (dispatch) => {\n    const VKConnectCallback = (e) => {\n        if (e.detail.type === 'VKWebAppUpdateConfig') {\n            VKConnect.unsubscribe(VKConnectCallback);\n\n            dispatch(setColorScheme(e.detail.data.scheme));\n        }\n    };\n\n    VKConnect.subscribe(VKConnectCallback);\n    return VKConnect.send('VKWebAppInit', {}).then(data => {\n        return data;\n    }).catch(error => {\n        return error;\n    });\n};\n\nexport const getAuthToken = (scope) => (dispatch) => {\n    VKConnect.send(\"VKWebAppGetAuthToken\", {\n        \"app_id\": APP_ID,\n        \"scope\": scope.join(',')\n    }).then(data => {\n        dispatch(setAccessToken(data.access_token));\n    }).catch(() => {\n        dispatch(setAccessToken(null));\n    });\n};\n\nexport const closeApp = () => {\n    return VKConnect.send(\"VKWebAppClose\", {\n        \"status\": \"success\"\n    }).then(data => {\n        return data;\n    }).catch(error => {\n        return error;\n    });\n};\n\nexport const swipeBackOn = () => {\n    return VKConnect.send(\"VKWebAppEnableSwipeBack\", {}).then(data => {\n        return data;\n    }).catch(error => {\n        return error;\n    });\n};\n\nexport const swipeBackOff = () => {\n    return VKConnect.send(\"VKWebAppDisableSwipeBack\", {}).then(data => {\n        return data;\n    }).catch(error => {\n        return error;\n    });\n};\n\nexport const groupsGet = () => {\n    return APICall('groups.get', {\n        \"extended\": \"1\",\n        \"fields\": \"description\",\n        \"count\": \"100\"\n    });\n};\n\nexport const APICall = (method, params) => {\n    params['access_token'] = store.getState().vkui.accessToken;\n    params['v'] = params['v'] === undefined ? API_VERSION : params['v'];\n\n    return VKConnect.send(\"VKWebAppCallAPIMethod\", {\n        \"method\": method,\n        \"params\": params\n    }).then(data => {\n        return data.response;\n    }).catch(error => {\n        return error;\n    });\n};\n"]},"metadata":{},"sourceType":"module"}